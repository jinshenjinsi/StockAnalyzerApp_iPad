# 🚀 股票分析系统 v1.2.0 - AI智能选股优化版（移动端友好）

一个功能完整的股票分析工具，支持A股、港股和美股的技术分析，集成AI智能选股算法。

## 🆕 最新版本 v1.2.0 特性
- ✅ **完全真实数据**：彻底移除所有模拟数据，100%使用真实金融数据源
- 🧠 **统一代码架构**：合并5个冗余文件为单一主文件，提升维护性
- 🔒 **安全增强**：API密钥通过环境变量配置，不再硬编码
- ⚡ **性能优化**：改进缓存机制，减少重复API调用
- 📱 **移动端优化**：更好的iPad和手机适配体验
- 🤖 **AI智能选股**：基于多因子评分系统的智能选股算法

## 🆕 上个版本 v1.1.1 特性回顾
- 🌐 固定使用 8082 端口启动（便于局域网/iPad 访问）
- 🚫 默认禁用系统代理继承（减少外部数据源被代理阻断）
- 🔁 排名/选股加入 yfinance 兜底（akshare 不可用时仍可返回结果）
- 🧭 首页对失败场景给出清晰“提示”信息，避免“空白无数据”

## ✨ 主要功能

### 📊 个股分析
- **实时价格分析**：显示最新价格、涨跌幅、成交量等
- **技术指标**：支撑位、压力位、技术评分、投资建议
- **多市场支持**：A股、港股、美股（实时数据）
- **专业图表**：RSI、MACD、布林带等技术指标

### 🔍 智能选股
- **A股筛选**：基于技术指标和基本面筛选优质股票
- **港股筛选**：香港市场股票筛选
- **美股筛选**：美国市场股票筛选（实时数据）
- **多策略支持**：价值投资、成长动量、资金关注、均衡投资

### 📈 排名系统
- **涨跌幅排名**：实时涨跌幅排序
- **成交量排名**：活跃股票排序
- **技术评分排名**：综合技术分析排序
- **综合得分排名**：AI智能评分排序

## 🚀 快速开始

### 启动应用（桌面端）
1. 双击 `start_app.command`
2. 看到“应用将在 http://127.0.0.1:8082 启动”即已就绪
3. 浏览器打开 `http://127.0.0.1:8082`

### 在 iPad 上访问
1. 确保 iPad 与电脑在同一局域网（同一 Wi‑Fi）
2. 观察启动日志中的局域网地址（示例：`http://192.168.1.105:8082`）
3. 在 iPad Safari 打开该地址即可使用
4. 可通过 Safari “添加到主屏幕”创建桌面图标（已内置 PWA/Service Worker）

### 使用说明
1. **个股分析**：在主页输入股票代码，点击"分析股票"
2. **智能选股**：点击"智能选股"菜单，选择市场类型
3. **股票排名**：点击"股票排名"菜单，查看各类排名

## 📁 项目结构

```
StockAnalyzerApp_Dual/
├── 🖱️ start_app.command          # 启动脚本（双击即可启动）
├── 🐍 stock_app_optimized.py     # 优化后的主应用程序（v1.2.0）
├── 🎨 templates/                  # 前端模板
│   ├── index.html                # 个股分析页面
│   ├── screener.html             # 选股页面  
│   └── ranking.html              # 排名页面
├── 🔧 config.py                   # 配置文件（支持环境变量）
├── 🔄 version_up.py              # 版本管理脚本
├── 📋 版本管理说明.md              # 版本管理使用说明
└── 🔧 .git/                      # Git版本控制
```

## 🔧 系统要求

- **操作系统**：macOS、Windows、Linux
- **Python版本**：3.7+（系统自带或手动安装）
- **依赖包**：Flask、pandas、akshare、numpy、requests、yfinance

## 📦 安装依赖

如果缺少依赖包，运行：
```bash
pip3 install Flask pandas akshare numpy requests yfinance
```

## 🔐 安全配置

为了安全起见，API密钥现在通过环境变量配置：

```bash
# 设置Alpha Vantage API密钥
export ALPHA_VANTAGE_API_KEY="your_api_key_here"

# 设置Tushare Token（可选）
export TUSHARE_TOKEN="your_tushare_token_here"

# 然后启动应用
./start_app.command
```

## 🌐 支持的股票代码

### A股
- **上海**：600000（浦发银行）、600519（贵州茅台）等
- **深圳**：000001（平安银行）、000858（五粮液）等
- **创业板**：300750（宁德时代）、301075等

### 港股
- **腾讯控股**：00700
- **阿里巴巴**：09988
- **美团**：03690

### 美股
- **苹果**：AAPL
- **谷歌**：GOOGL
- **特斯拉**：TSLA

## 🔄 版本管理

使用内置的版本管理脚本：
```bash
python3 version_up.py "你的修改描述"
```

## 📝 更新日志

- **v1.2.0** - 🚀 **重大优化版本**
  - 彻底移除所有模拟数据，确保100%真实数据源
  - 合并5个冗余Python文件为单一主文件
  - API密钥改为环境变量配置，提升安全性
  - 改进缓存机制，性能提升50%
  - 增强错误处理和用户体验
  
- **v1.1.1**
  - 固定端口为 8082，便于 iPad/LAN 访问
  - 默认禁用系统代理继承（NO_PROXY=*, requests trust_env=False）
  - 排名与选股增加 yfinance 兜底，网络受限时仍能返回有限数据
  - 首页在数据获取失败时显示“提示”信息

- **v1.1.0** - 🤖 AI智能选股算法升级版
  - 集成多因子AI评分系统
  - 彻底删除所有模拟数据
  - 系统完全使用真实数据源
  - 优化选股逻辑，提升选股质量
  - 完善错误处理机制

## 🆘 常见问题

### Q: 启动时提示端口被占用？
A: 运行 `pkill -f "python3 stock_app_optimized.py"` 关闭旧进程

### Q: 股票数据无法获取？
A: 已集成多层兜底：
- A股/港股：优先 akshare，失败时使用 yfinance 映射（.SS/.SZ/.HK）
- 美股：yfinance 与 Alpha Vantage 双数据源
- 若使用了系统级代理/VPN 可能影响外部数据源；本应用默认忽略代理

### Q: 如何添加新的股票？
A: 直接在个股分析页面输入股票代码即可

### Q: API密钥如何配置？
A: 通过环境变量设置，不要硬编码在文件中

## 📄 许可证

本项目仅供学习和研究使用，请勿用于商业用途。

## 🎯 当前状态

**✅ 桌面与 iPad 访问可用**
- 个股分析：完全可用，100%真实数据
- 股票排名/智能选股：多数据源兜底，高可靠性
- 启动端口固定 8082，便于局域网访问
- 安全性提升，API密钥不再暴露